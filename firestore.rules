rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Simplified Admin Check for Vibe Coding / Dev Mode
    // Ideally: exists(/databases/$(database)/documents/admins/$(request.auth.token.email))
    // For now: Just trust authenticated users (since we only show login to admins)
    function isAdmin() {
      return request.auth != null && request.auth.token.email == "22bmiit046@gmail.com";
    }

    match /admins/{email} {
      allow read: if isAdmin();
      allow write: if false; 
    }

    match /players/{playerId} {
      allow read: if true;
      allow write: if isAdmin();
    }

    match /teams/{teamId} {
      allow read: if true;
      allow write: if isAdmin();
    }
    
    match /teamPlayers/{docId} {
        allow read: if true;
        allow write: if isAdmin();
    }

    match /competitions/{competitionId} {
      allow read: if true;
      allow write: if isAdmin();
    }
    
    match /scores/{scoreId} {
        allow read: if true;
        allow write: if isAdmin();
    }
  }
}
